<!DOCTYPE html>
<html>

<head>
  {% load static %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="{% static 'app/css/styles.css' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
</head>

<body>
  {% include 'app/navbar.html' %}

  <div class="row mx-5 my-5">
    <div class="{% if user.creator %}col-sm-1{% else %}col-sm-4{% endif %}"></div>
    <div class="{% if user.creator %}col-sm-3{% else %}col-sm-4{% endif %}">
      <div class="d-flex flex-column align-items-center text-center border p-4">
        {% with "app/assets/img/"|add:user.image_path as image_path %}
        <img class="rounded-circle mb-3" width="200px" src="{% static image_path %}">
        {% endwith %}
        <h4 class="card-title"><b>KTMcdonnell</b></h4>
        <p class="card-text">ktm@cs.stonybrook.edu</p>
        <a class="btn btn-light" href="{% url 'settings' %}">
          Edit Profile
          <span class="bi-pencil-fill"></span>
        </a>
        <hr style="border-color: #DDD; width: 100%">
        <button type="button" class="btn btn-primary btn-block">Contact Me</button>
        <hr style="border-color: #DDD; width: 100%">
        <dl class="row mb-0">
          <dt class="col-sm-8 text-left">First Name</dt>
          <dd class="col-sm-4 text-right">{{ user.first_name }}</dd>
          <dt class="col-sm-8 text-left">Last Name</dt>
          <dd class="col-sm-4 text-right">{{ user.last_name }}</dd>
          {% if user.creator %}
          <dt class="col-sm-8 text-left">Services Completed</dt>
          <dd class="col-sm-4 text-right">{{ user.services_completed }}</dd>
          <dt class="col-sm-8 text-left">Subscriber Count</dt>
          <dd class="col-sm-4 text-right">{{ user.subscriber_count }}</dd>
          <dt class="col-sm-8 text-left">Rating</dt>
          <dd class="col-sm-4 text-right">{{ user.rating }}</dd>
          {% endif %}
        </dl>
        <hr style="border-color: #DDD; width: 100%">
        <p class="card-text text-left w-100"><b>Description</b></p>
        <p class="card-text text-left">{{ user.description }}</p>
        <hr style="border-color: #DDD; width: 100%">
        <a href="{% url 'report' %}" class="btn btn-danger btn-block">Report {% if user.creator %}Creator{% else %}User{% endif %}</a>
      </div>
    </div>
    {% if user.creator %}
    <div class="col-sm-7">
      {% if service_list %}
      <div class="d-flex align-items-center px-3">
        <h1 class="flex-grow-1 m-0">Services</h1>
        <button type="button" disabled class="btn">
          <span class="bi-caret-left-fill"></span>
        </button>
        <button type="button" disabled class="btn">
          <span class="bi-caret-right-fill"></span>
        </button>
      </div>
      <hr style="border-color: #DDD; width: 100%">
      <div class="row flex-row flex-nowrap overflow-auto">
        {% for service in service_list %}
        <div class="col-sm-4 mb-3">
          {% include 'app/service_card.html' %}
        </div>
        {% endfor %}
      </div>
      {% endif %}
      {% if subscription %}
      <h1>Subscription</h1>
      <hr style="border-color: #DDD; width: 100%">
      <div class="row mb-3 text-center">
        <div class="col">
          <div class="card mb-4 rounded-3 shadow-sm">
            <div class="card-header py-3">
              <h4 class="my-0 fw-normal">Free</h4>
            </div>
            <div class="card-body">
              <h1 class="card-title pricing-card-title">{{ subscription.free.cost }} ALGO<small class="text-muted fw-light">/mo</small></h1>
              <ul class="list-unstyled mt-3 mb-4">
                {% load custom_tags %}
                {% for quantity in subscription.free.quantities %}
                {% with forloop.counter|add:-1 as ind %}
                <li>{{ quantity }} {{ subscription.perks|index:ind }}</li>
                {% endwith %}
                {% endfor %}
              </ul>
              <button type="button" class="w-100 btn btn-lg btn-outline-primary">Subscribe</button>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card mb-4 rounded-3 shadow-sm">
            <div class="card-header py-3">
              <h4 class="my-0 fw-normal">Pro</h4>
            </div>
            <div class="card-body">
              <h1 class="card-title pricing-card-title">{{ subscription.pro.cost }} ALGO<small class="text-muted fw-light">/mo</small></h1>
              <ul class="list-unstyled mt-3 mb-4">
                {% for quantity in subscription.pro.quantities %}
                {% with forloop.counter|add:-1 as ind %}
                <li>{{ quantity }} {{ subscription.perks|index:ind }}</li>
                {% endwith %}
                {% endfor %}
              </ul>
              <button type="button" class="w-100 btn btn-lg btn-primary">Subscribe</button>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card mb-4 rounded-3 shadow-sm border-primary">
            <div class="card-header py-3 text-white bg-primary border-primary">
              <h4 class="my-0 fw-normal">Premium</h4>
            </div>
            <div class="card-body">
              <h1 class="card-title pricing-card-title">{{ subscription.premium.cost }} ALGO<small class="text-muted fw-light">/mo</small></h1>
              <ul class="list-unstyled mt-3 mb-4">
                {% for quantity in subscription.premium.quantities %}
                {% with forloop.counter|add:-1 as ind %}
                <li>{{ quantity }} {{ subscription.perks|index:ind }}</li>
                {% endwith %}
                {% endfor %}
              </ul>
              <button type="button" class="w-100 btn btn-lg btn-primary">Subscribe</button>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
    {% endif %}
    <div class="{% if user.creator %}col-sm-1{% else %}col-sm-4{% endif %}"></div>
  </div>
</body>

</html>